(function(t){function e(e){for(var i,r,c=e[0],n=e[1],o=e[2],p=0,d=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);u&&u(e);while(d.length)d.shift()();return l.push.apply(l,o||[]),s()}function s(){for(var t,e=0;e<l.length;e++){for(var s=l[e],i=!0,c=1;c<s.length;c++){var n=s[c];0!==a[n]&&(i=!1)}i&&(l.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},a={index:0},l=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],n=c.push.bind(c);c.push=e,c=c.slice();for(var o=0;o<c.length;o++)e(c[o]);var u=n;l.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("1d50")},1486:function(t,e,s){},1577:function(t,e,s){"use strict";var i=s("93c5"),a=s.n(i);a.a},"1d50":function(t,e,s){"use strict";s.r(e);var i=s("e832"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view"),s("control-bar",{directives:[{name:"show",rawName:"v-show",value:t.CtrlBarShow,expression:"CtrlBarShow"}],on:{openCard:t.openCard,togglePlayList:t.togglePlayList}}),s("player"),s("transition",{attrs:{name:"slide-fade"}},[s("play-list",{directives:[{name:"show",rawName:"v-show",value:t.playListShow,expression:"playListShow"}],on:{close:t.closePlayList}})],1)],1)},l=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"control-bar"},[s("div",{staticClass:"progress",attrs:{id:"progress"},on:{click:t.changeProcess}},[s("span",{staticClass:"vernier",style:{left:t.vernierLeft+"px"}})]),s("div",{staticClass:"disk"}),t.musicSelected?s("div",{staticClass:"content",on:{click:function(e){return t.$emit("openCard")}}},[s("p",[t._v(t._s(t.musicSelected.name)+"-"+t._s(t.musicSelected.singer))])]):s("div",{staticClass:"content"},[s("p",[t._v("未选择歌曲")])]),s("div",{staticClass:"right"},[s("span",{on:{click:t.play}},[s("i",{staticClass:"fa",class:{"fa-play-circle-o":!t.isPlay,"fa-pause-circle-o":t.isPlay}})]),s("span",{staticClass:"next",on:{click:t.next}},[s("i",{staticClass:"fa fa-play"})]),s("span",{on:{click:t.toPlayList}},[s("i",{staticClass:"fa fa-bars"})])])])},c=[],n=s("94ea");s("f6f6");var o={components:{},data(){return{progressWidth:375}},computed:{...Object(n["c"])(["currentTime","duration","isPlay","playType","playList","musicSelectedIndex"]),musicSelected(){return this.playList[this.musicSelectedIndex]||null},process(){let t=this.currentTime/this.duration;return t.toFixed(2)},vernierLeft(){return Math.round(this.progressWidth*this.process)-7.5}},watch:{musicUrl(t){this.init()}},methods:{...Object(n["b"])(["nextMusic","invertIsPlay","setCurrentTime","setProcess"]),play(){this.musicSelected&&this.invertIsPlay()},next(){this.nextMusic()},toPlayList(){this.$emit("togglePlayList")},changeProcess(){let t=event.clientX/this.progressWidth;t=t.toFixed(2),this.setProcess(t)}},mounted(){let t=document.querySelector("#progress");this.progressWidth=parseInt(getComputedStyle(t,null)["width"])}},u=o,p=(s("8c17"),s("a6c2")),d=Object(p["a"])(u,r,c,!1,null,"09ba7279",null),h=d.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"player"},[s("audio",{staticStyle:{display:"none"},attrs:{id:"player",src:t.musicUrl,controls:"controls"}})])},y=[];let f=s("f6f6");var g={components:{Player:C},data(){return{player:null}},computed:{...Object(n["c"])(["currentTime","duration","process","isPlay","playType","playList","musicSelectedIndex"]),musicSelected(){return this.playList[this.musicSelectedIndex]||null},musicUrl(){return this.musicSelected?this.musicSelected.url:""}},watch:{musicUrl(t){this.init()},isPlay(){this.musicSelected&&(this.isPlay?this.player.play():this.player.pause())},process(){this.player.currentTime=this.duration*this.process}},methods:{...Object(n["b"])(["nextMusic","setCurrentTime","setDuration"]),computeProcess(){let t=this.currentTime/this.duration;return t.toFixed(2)},init(){this.player.addEventListener("loadstart",t=>{}),this.player.addEventListener("canplaythrough",t=>{this.setCurrentTime(this.player.currentTime),this.setDuration(parseInt(this.player.duration)),this.isPlay&&this.player.play()})}},mounted(){this.player=document.querySelector("#player"),this.player.addEventListener("timeupdate",f.throttle(t=>{this.setCurrentTime(this.player.currentTime),this.player.ended&&(this.setCurrentTime(0),this.nextMusic())},1e3))}},v=g,S=Object(p["a"])(v,m,y,!1,null,null,null),C=S.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play-list"},[s("head-bar",{staticClass:"head-bar",attrs:{title:"播放队列",left:"",right:"times"},on:{right:function(e){return t.$emit("close")}}}),s("div",{staticClass:"list-header",on:{click:t.switchHandle}},[s("img",{attrs:{src:"/play-icon/"+t.playType+".png",alt:""}}),s("h2",{staticClass:"switch"},[t._v(" "+t._s(t.playTypeMsg)+" ")]),t._m(0)]),t.playList.length?s("ul",{staticClass:"list-group"},t._l(t.playList,(function(e,i){return s("li",{key:e.id,staticClass:"list-group-item",class:{active:i===t.musicSelectedIndex}},[s("div",{staticClass:"content",on:{click:function(s){return t.selectMusic({music:e})}}},[s("p",[t._v(t._s(e.name)+"-"),s("i",[t._v(t._s(e.singer))])])]),s("div",{staticClass:"right",on:{click:function(s){return t.deleteMusic({music:e})}}},[s("span",[t._v(" × ")])])])})),0):s("ul",{staticClass:"list-group"},[s("p",{staticClass:"blank-text"},[t._v("列表为空")])]),s("div",{staticClass:"close",on:{click:function(e){return t.$emit("close")}}},[t._v(" 关闭 ")])],1)},x=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("small",[t._v("点击切换")])])}],T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"head-bar"},[s("span",{staticClass:"left",on:{click:function(e){return t.$emit("left")}}},[s("i",{class:["fa","fa-"+t.left]})]),s("h1",[t._v(t._s(t.title))]),s("span",{staticClass:"right",on:{click:function(e){return t.$emit("right")}}},[s("i",{class:["fa","fa-"+t.right]})])])},w=[],L={props:{title:{Type:String,default:""},left:{type:String,default:"chevron-left"},right:{type:String,default:"ellipsis-v"}}},P=L,I=(s("f446"),Object(p["a"])(P,T,w,!1,null,"45c4fed7",null)),b=I.exports,M={components:{HeadBar:b},data(){return{playTypeMsgMap:{sequence:"顺序播放",random:"随机播放",single:"单曲循环"}}},computed:{...Object(n["c"])(["playList","musicSelectedIndex","playType"]),playTypeMsg(){return this.playTypeMsgMap[this.playType]}},methods:{...Object(n["b"])(["selectMusic","deleteMusic","switchPlayType"]),switchHandle(){this.switchPlayType()}}},k=M,O=(s("1577"),Object(p["a"])(k,_,x,!1,null,"049710d0",null)),$=O.exports,j={components:{ControlBar:h,Player:C,PlayList:$},data(){return{playListShow:!1}},methods:{openCard(){this.$router.push({path:"/playcard"})},openPlayList(){this.playListShow=!0},closePlayList(){this.playListShow=!1},togglePlayList(){this.playListShow=!this.playListShow}},computed:{...Object(n["c"])(["CtrlBarShow"])},watch:{CtrlBarShow(t){this.$el.style.paddingBottom=t?0:"60px"}},created(){let t=this.$store.state,e=localStorage.getItem("music-musicSelectedIndex"),s=(localStorage.getItem("music-isPlay"),localStorage.getItem("music-playType")),i=(localStorage.getItem("music-currentTime"),localStorage.getItem("music-playList"));e&&(t.musicSelectedIndex=parseInt(e)),s&&(t.playType=s),i&&(t.playList=JSON.parse(i))}},E=j,B=(s("1f1f"),Object(p["a"])(E,a,l,!1,null,null,null)),q=B.exports,H=s("4af9"),W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("head-bar",{attrs:{title:t.pageTitle,left:t.pageLeft,right:"search"},on:{right:t.toSearch}}),s("ul",{staticClass:"list-group"},t._l(t.musicGroups,(function(e){return s("li",{key:e.id,staticClass:"list-group-item",on:{click:function(s){return t.toList(e)}}},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:e.logo,alt:""}})]),s("div",{staticClass:"content"},[s("p",[t._v(t._s(e.name))]),s("p",[s("small",[t._v("共"+t._s(e.count)+"首")])])]),t._m(0,!0)])})),0)],1)},N=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("span",[s("i",{staticClass:"fa fa-chevron-right"})])])}];const F="/";var J={API_HOST:F};let U=J.API_HOST;var A={components:{HeadBar:b},data(){return{pageTitle:"全部列表",pageLeft:"",musicGroups:[],musicList:[]}},methods:{toList(t){let e=t.id,s=t.name;this.$router.push({path:"list",query:{id:e,groupName:s}})},toSearch(){}},mounted(){this.axios.get(U+"api/music/listgroup").then(t=>{this.musicGroups=t.data}).catch(t=>{console.log(t)})}},D=A,G=(s("c1c3"),Object(p["a"])(D,W,N,!1,null,"7288ed83",null)),X=G.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("head-bar",{staticClass:"head-bar",attrs:{title:t.pageTitle,right:""},on:{left:function(e){return t.$router.go(-1)}}}),s("ul",{staticClass:"list-group"},t._l(t.musicList,(function(e,i){return s("li",{key:e.id,staticClass:"list-group-item"},[s("div",{staticClass:"index"},[t._v(t._s(i+1))]),s("div",{staticClass:"content"},[s("p",[t._v(t._s(e.name))]),s("p",[s("small",[t._v(t._s(e.singer))])])]),s("div",{staticClass:"right"},[s("span",{on:{click:function(s){return t.pushMusic({music:e,play:!0})}}},[s("i",{staticClass:"fa fa-play-circle"})]),s("span",{on:{click:function(s){return t.pushMusic({music:e,play:!1})}}},[s("i",{staticClass:"fa fa-plus"})])])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isTipShow,expression:"isTipShow"}],staticClass:"tip",on:{click:t.hideTip}},[t._v(" 点击+号添加的歌曲在这 "),s("div",{staticClass:"triangle"})])],1)},K=[];let Q=J.API_HOST;var R={components:{HeadBar:b},data(){return{pageTitle:"",musicList:[],isTipShow:!0}},methods:{...Object(n["b"])(["pushMusic"]),hideTip(){this.isTipShow=!1}},mounted(){this.pageTitle=this.$route.query.groupName;let t=this.$route.query.id;this.axios.get(Q+"api/music/list?id="+t).then(t=>{this.musicList=t.data}).then(t=>{console.log(t)}),setTimeout(()=>{this.isTipShow=!1},1e4)}},V=R,Y=(s("c52c"),Object(p["a"])(V,z,K,!1,null,"12a2f02f",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play-card"},[s("head-bar",{attrs:{title:t.musicSelected.name,left:"chevron-down"},on:{left:t.close}}),s("div",{staticClass:"singer"},[t._v("—— "+t._s(t.musicSelected.singer)+" ——")]),t._m(0),t._m(1),s("div",{staticClass:"progress-wrap"},[s("p",[t._v(t._s(t.startTime))]),s("div",{staticClass:"progress",attrs:{id:"card-progress"},on:{click:t.changeProcess}},[s("span",{staticClass:"vernier",style:{left:t.vernierLeft+"px"}})]),s("p",[t._v(t._s(t.endTime))])]),s("div",{staticClass:"control"},[s("div",{staticClass:"play-side",on:{click:t.switchHandle}},[s("img",{attrs:{src:"/play-icon/"+t.playType+".png",alt:""}})]),s("div",{staticClass:"play-control"},[s("div",{staticClass:"left",on:{click:t.prevMusic}},[t._m(2)]),s("div",{staticClass:"play",style:"width: "+(t.isPlay?50:45)+"px; paddingLeft: "+(t.isPlay?0:5)+"px",on:{click:t.invertIsPlay}},[s("span",[s("i",{class:"fa fa-"+(t.isPlay?"pause":"play")})])]),s("div",{staticClass:"right",on:{click:t.nextMusic}},[t._m(3)])]),s("div",{staticClass:"play-side",on:{click:t.toPlayList}},[t._m(4)])])],1)},et=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"disk-wrap"},[s("div",{staticClass:"disk"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lrc"},[s("p",[t._v("暂无歌词")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("i",{staticClass:"fa fa-step-backward"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("i",{staticClass:"fa fa-step-forward"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[s("i",{staticClass:"fa fa-bars"})])])}],st={components:{HeadBar:b},data(){return{progressWidth:360}},computed:{...Object(n["c"])(["currentTime","duration","isPlay","playType","playList","musicSelectedIndex"]),musicSelected(){return this.playList[this.musicSelectedIndex]||null},process(){let t=this.currentTime/this.duration;return t.toFixed(2)},vernierLeft(){return Math.round(this.progressWidth*this.process)-7.5},startTime(){let t=Math.floor(this.currentTime/60);t=t<10?"0"+t:t;let e=parseInt(this.currentTime%60);return e=e<10?"0"+e:e,t+":"+e},endTime(){let t=Math.floor(this.duration/60);t=t<10?"0"+t:t;let e=parseInt(this.duration%60);return e=e<10?"0"+e:e,t+":"+e}},watch:{},methods:{...Object(n["b"])(["switchPlayType","prevMusic","nextMusic","invertIsPlay","setProcess"]),switchHandle(){this.switchPlayType()},close(){this.$el.style.top="90%",setTimeout(()=>{this.$store.state.CtrlBarShow=!0,this.$router.go(-1)},400)},toPlayList(){this.$parent.openPlayList()},changeProcess(){let t=(event.clientX-65)/this.progressWidth;t=t.toFixed(2),this.setProcess(t)}},mounted(){this.$store.state.CtrlBarShow=!1,this.$parent.closePlayList();let t=document.querySelector("#card-progress");this.progressWidth=parseInt(getComputedStyle(t,null)["width"]),this.$el.style.top=0}},it=st,at=(s("92aa"),Object(p["a"])(it,tt,et,!1,null,"5fa3600a",null)),lt=at.exports;i["a"].use(H["a"]);const rt=[{path:"/",name:"home",component:X},{path:"/list",component:Z},{path:"/playcard",component:lt}],ct=new H["a"]({routes:rt});var nt=ct;i["a"].use(n["a"]);var ot=new n["a"].Store({state:{isPlay:!1,playType:"random",musicSelectedIndex:0,currentTime:0,duration:300,process:0,oldCurrentTime:0,CtrlBarShow:!0,playList:[{id:1,name:"告白气球",singer:"周杰伦",url:"http://static.c2wei.cn/1.mp3"},{id:2,name:"睡公主",singer:"邓紫棋",url:"http://qn.clw-music.c2wei.cn/22.mp3"}]},mutations:{invertIsPlay(t){t.isPlay=!t.isPlay,localStorage.setItem("music-isPlay",t.isPlay)},setCurrentTime(t,e){t.currentTime=e,e-t.oldCurrentTime>5&&(localStorage.setItem("music-currentTime",t.currentTime),t.oldCurrentTime=e)},setDuration(t,e){t.duration=e},setProcess(t,e){t.process=e},pushMusic(t,{music:e,play:s}){let i=-1;t.playList.forEach((t,s)=>{t.id===e.id&&(i=s)}),-1===i?(t.playList.push(e),localStorage.setItem("music-playList",JSON.stringify(t.playList)),s&&(t.musicSelectedIndex=t.playList.length-1,t.isPlay=!0)):s&&(t.musicSelectedIndex=i,t.isPlay=!0)},selectMusic(t,{music:e}){let s=-1;t.playList.forEach((t,i)=>{t.id===e.id&&(s=i)}),-1!==s&&(t.musicSelectedIndex=s,localStorage.setItem("music-musicSelectedIndex",t.musicSelectedIndex))},deleteMusic(t,{music:e}){let s=-1;t.playList.forEach((t,i)=>{t.id===e.id&&(s=i)}),-1!==s&&(t.playList.splice(s,1),s<t.musicSelectedIndex&&t.musicSelectedIndex--,t.musicSelectedIndex===s&&this.commit("nextMusic"),localStorage.setItem("music-musicSelectedIndex",t.musicSelectedIndex))},switchPlayType(t,e){let s=["sequence","random","single"];if(e)s.indexOf(e)>-1&&(t.playType=e);else{let e=s.indexOf(t.playType);e<0&&(e=0);let i=(e+1)%s.length;t.playType=s[i]}localStorage.setItem("music-playType",t.playType)},nextMusic(t){if(!(t.playList.length<1)){switch(("single"==t.playType||t.playList.length<2)&&(t.player.currentTime=0),t.playType){case"sequence":t.musicSelectedIndex++,t.musicSelectedIndex>t.playList.length-1&&(t.musicSelectedIndex=0);break;case"random":let e=t.musicSelectedIndex,s=Math.floor(Math.random()*t.playList.length);while(e===s&&t.playList.length>1)s=Math.floor(Math.random()*t.playList.length);t.musicSelectedIndex=s;break;case"single":return}localStorage.setItem("music-musicSelectedIndex",t.musicSelectedIndex)}},prevMusic(t){if(!(t.playList.length<1)){switch(("single"==t.playType||t.playList.length<2)&&(t.player.currentTime=0),t.playType){case"sequence":t.musicSelectedIndex--,t.musicSelectedIndex<0&&(t.musicSelectedIndex=t.playList.length-1);break;case"random":let e=t.musicSelectedIndex,s=Math.floor(Math.random()*t.playList.length);while(e===s&&t.playList.length>1)s=Math.floor(Math.random()*t.playList.length);t.musicSelectedIndex=s;break;case"single":return}localStorage.setItem("music-musicSelectedIndex",t.musicSelectedIndex)}}},actions:{},modules:{}}),ut=s("29a6"),pt=s.n(ut),dt=s("7338"),ht=s.n(dt);i["a"].use(pt.a,ht.a),i["a"].config.productionTip=!1,new i["a"]({router:nt,store:ot,render:t=>t(q)}).$mount("#app")},"1f1f":function(t,e,s){"use strict";var i=s("40d3"),a=s.n(i);a.a},3864:function(t,e,s){},"40d3":function(t,e,s){},"5c4a":function(t,e,s){},"78c6":function(t,e,s){},"7be0":function(t,e,s){},"8c17":function(t,e,s){"use strict";var i=s("3864"),a=s.n(i);a.a},"92aa":function(t,e,s){"use strict";var i=s("1486"),a=s.n(i);a.a},"93c5":function(t,e,s){},c1c3:function(t,e,s){"use strict";var i=s("5c4a"),a=s.n(i);a.a},c52c:function(t,e,s){"use strict";var i=s("7be0"),a=s.n(i);a.a},f446:function(t,e,s){"use strict";var i=s("78c6"),a=s.n(i);a.a}});
//# sourceMappingURL=index.cd4e3a32.js.map